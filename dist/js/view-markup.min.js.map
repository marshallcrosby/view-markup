{"version":3,"sources":["view-markup.js"],"names":["viewMarkupEl","document","querySelectorAll","srcready","Event","pageSrc","request","window","XMLHttpRequest","ActiveXObject","makeHttpObject","open","send","onreadystatechange","readyState","responseText","dispatchEvent","addEventListener","length","options","elHtmlInitial","elHtmlStripped","elAmount","modalEl","createElement","markupContentHtmlString","suppressClass","el","optionSuppressClass","getAttribute","split","semiColonSplit","undefined","trim","parseOption","splitOn","optionString","forEach","item","index","tagName","toLowerCase","toString","outerHTML","optionPreserveAttr","leaveAttr","replace","sRegExInput","RegExp","modalBtn","classList","add","setAttribute","innerHTML","nodeName","wrapperDivBody","body","prepend","appendChild","markupWrapperDiv","wrapper","parentNode","insertBefore","title","btnX","btnY","btnZ","btnPos","btnAppendTo","btnPrependTo","btnColor","scriptSelector","backdropRgb","renderInPage","marginBottom","marginTop","modalNav","currentElement","style","transform","zIndex","position","backgroundColor","elBtnParent","querySelector","closest","textStyle","textStyleString","textContent","head","highlightVersionNumb","css","js","themeCssDarkUrl","themeCssLightUrl","highlightCssUrl","localStorage","getItem","highlightScriptUrl","beautifyScriptUrl","loadExternalJs","scriptSrc","callback","getElementsByTagName","script","src","onload","url","link","id","rel","href","loadExternalCss","viewMarkupInitialize","modalDialog","wrapperEl","inPageBlock","inPageContent","inPageHeader","modalSetSize","readyAdjustments","inPageCodeJsBlock","jsToTidy","tidyJS","html_beautify","indent_size","getCachedSpaceTab","space_in_empty_paren","hljs","highlightElement","inPageCodeHtmlBlock","tidyHTML","remove","modalNavEl","modalPrevBtn","modalNextBtn","modalNavigate","this","modalNavigation","documentElement","allID","allFor","allAriaLabelledBy","x","y","currentFor","z","currentAriaLabelledBy","modalContent","modalCloseBtn","copyBtn","settingsBtn","settingsDropdown","textArea","preEl","htmlCodeEl","jsCodeEl","radio2Spaces","radio4Spaces","themeDark","themeLight","fontSize","htmlTab","jsTab","modalCodeHtmlEL","modalContentEl","modalTitleEl","modalSizeMedium","modalSizeLarge","modalCodeJsEL","checked","value","currentValue","setItem","currentShowingCode","currentCode","i","offsetWidth","offsetHeight","code","spaceTabRadio","tidyCode","applyTidyCodeToTextArea","applyCopyBtnState","navigator","clipboard","writeText","applyCleanHtml","applyCleanJs","focus","getElementById","event","isClickInside","contains","target","modalHide","e","key","currentViewMarkupIndex","focusedElementBeforeModal","optionDropdownClass","modalBtnEL","html","spaces","btnEl","activeElement","keyCode","shiftKey","firstTabStop","preventDefault","lastTabStop","focusableElements","Array","prototype","slice","call","modalShow","hasAttribute","cleanTitle","codeEl","setTabSpaces","tidyJs","checkedSpacesRadio","state","clickedButton","removeAttribute","focusedElementBeforemodalEl","direction","mapToModalBtnIndex","parseInt","mapToModalBtnSelector","mapToModalBtn","click","setTimeout","ariaExpandedAttr","toggle","scriptLinkage","dynamicPos","dynamicPosZIndex","urlParam","URLSearchParams","get","floatingButtonHolder","withmodalEl","floatingModalBtn","positionModalBtns","load","btnElement","top","getBoundingClientRect","scrollY","left","docFrag","createDocumentFragment","firstChild","child","removeChild","replaceChild","unwrap","func","timer","clearTimeout","debounce"],"mappings":"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","sourcesContent":["/*!\n    * View markup v1.1.6\n    * Plugin that makes it easy for developers to view and copy the html needed for a component.\n    *\n    * Copyright 2021-2022 Marshall Crosby\n    * https://marshallcrosby.com\n*/\n\n// Cache view markup elements immediately.\nconst viewMarkupEl = document.querySelectorAll('[data-view-markup]');\n\n(function () {\n    \"use strict\"\n\n    // -----------------------------------------------------------------------------\n    // Setup outer div and modal btn (with options)\n    // -----------------------------------------------------------------------------\n   \n    let srcready = new Event('src-is-ready');\n    let pageSrc = null;\n    let request = makeHttpObject();\n    \n    request.open('GET', '/', true);\n    request.send(null);\n    request.onreadystatechange = function() {\n        if (request.readyState === 4) {\n            pageSrc = request.responseText;\n            document.dispatchEvent(srcready);\n        }\n    }\n\n    // Get page src\n    function makeHttpObject() {\n        if ('XMLHttpRequest' in window) {\n            return new XMLHttpRequest();\n        } else if ('ActiveXObject' in window) {\n            return new ActiveXObject('Msxml2.XMLHTTP');\n        }\n    }\n\n    document.addEventListener('src-is-ready', function () {\n        if (viewMarkupEl.length > 0) {\n            \n            let elHtmlInitial = [];\n            let elHtmlStripped = [];\n            let elAmount = 0;\n            let options;\n\n            // Declare base modal element right away to add some data attributes to\n            let modalEl = document.createElement('div');\n\n            let markupContentHtmlString = `//import _view-markup-modal.html`;\n\n            viewMarkupEl.forEach(function (item, index) {\n                \n                // Cache all viewable markup elements               \n                elHtmlInitial[index] = (index === 0 && viewMarkupEl[0].tagName.toLowerCase() === 'html') ?\n                    pageSrc.toString() :\n                    viewMarkupEl[index].outerHTML.toString();\n\n                // Remove the view markup specific data attributes\n                if (!leaveAttr(viewMarkupEl[index])) {\n                    elHtmlStripped[index] = elHtmlInitial[index].replace(/data-view-markup=\".*\"/g, '').replace(/data-view-markup/g, '');\n                }\n\n                // Remove class\n                if (suppressClass(viewMarkupEl[index])) {\n                    var sRegExInput = new RegExp(suppressClass(viewMarkupEl[index]), 'g');\n                    elHtmlStripped[index] = elHtmlInitial[index].replace(sRegExInput, '');\n                }\n                \n                // Create modal button\n                let modalBtn = document.createElement('button');\n                modalBtn.classList.add('view-markup__modal-btn');\n                modalBtn.setAttribute('type', 'button');\n                modalBtn.innerHTML = '<span class=\"view-markup__modal-btn-text\">View markup</span>';\n                    \n                // if <html> or <body> do things a bit differently\n                if (viewMarkupEl[index].nodeName.toLowerCase()  === 'body' || viewMarkupEl[index].nodeName.toLowerCase()  === 'html') {\n                    let wrapperDivBody = document.createElement('div');\n                    wrapperDivBody.classList.add('view-markup');\n                    wrapperDivBody.classList.add('view-markup--body');\n                    document.body.prepend(wrapperDivBody);\n                    wrapperDivBody.appendChild(modalBtn);\n                } else {\n                    \n                    // Wrap in div\n                    let markupWrapperDiv = document.createElement('div');\n                    markupWrapperDiv.classList.add('view-markup');\n                    markupWrapperDiv.innerHTML = '<div class=\"view-markup__highlight\"></div>';\n                    wrapElement(viewMarkupEl[index], markupWrapperDiv);\n                    markupWrapperDiv.prepend(modalBtn);\n                }\n                \n                options = {\n                    title: null,\n                    btnX: null,\n                    btnY: null,\n                    btnZ: null,\n                    btnPos: null,\n                    btnAppendTo: null,\n                    btnPrependTo: null,\n                    btnColor: null,\n                    scriptSelector: null,\n                    backdropRgb: null,\n                    renderInPage: null,\n                    marginBottom: null,\n                    marginTop: null,\n                    modalNav: null\n                };\n                    \n                // Apply some options to toggle if available\n                let currentElement = viewMarkupEl[index];\n                if (currentElement.getAttribute('data-view-markup') !== '') {\n                    let semiColonSplit = viewMarkupEl[index].getAttribute('data-view-markup').split(';');\n                    \n                    // Assign option values if any\n                    semiColonSplit.forEach(function (item, index) {\n                        if (semiColonSplit[index].split('title:')[1] !== undefined) {\n                            options.title = parseOption(semiColonSplit[index], 'title');\n                        }\n\n                        if (semiColonSplit[index].split('btn-x:')[1] !== undefined) {\n                            options.btnX = parseOption(semiColonSplit[index], 'btn-x');\n                        }\n                        \n                        if (semiColonSplit[index].split('btn-y:')[1] !== undefined) {\n                            options.btnY = parseOption(semiColonSplit[index], 'btn-y');\n                        }\n                        \n                        if (semiColonSplit[index].split('btn-z:')[1] !== undefined) {\n                            options.btnZ = parseOption(semiColonSplit[index], 'btn-z');\n                        }\n                        \n                        if (semiColonSplit[index].split('btn-pos:')[1] !== undefined) {\n                            options.btnPos = parseOption(semiColonSplit[index], 'btn-pos');\n                        }\n                        \n                        if (semiColonSplit[index].split('btn-append-to:')[1] !== undefined) {\n                            options.btnAppendTo = parseOption(semiColonSplit[index], 'btn-append-to');\n                        }\n                        \n                        if (semiColonSplit[index].split('btn-prepend-to:')[1] !== undefined) {\n                            options.btnPrependTo = parseOption(semiColonSplit[index], 'btn-prepend-to');\n                        }\n                        \n                        if (semiColonSplit[index].split('btn-color:')[1] !== undefined) {\n                            options.btnColor = parseOption(semiColonSplit[index], 'btn-color');\n                        }\n                        \n                        if (semiColonSplit[index].split('associated-script:')[1] !== undefined) {\n                            options.scriptSelector = parseOption(semiColonSplit[index], 'associated-script');\n                        }\n                        \n                        if (semiColonSplit[index].split('backdrop-rgb:')[1] !== undefined) {\n                            options.backdropRgb = parseOption(semiColonSplit[index], 'backdrop-rgb');\n                        }\n                        \n                        if (semiColonSplit[index].split('render-in-page:')[1] !== undefined) {\n                            options.renderInPage = parseOption(semiColonSplit[index], 'render-in-page');\n                            currentElement.setAttribute('data-view-markup-render-in-page', '');\n                        }\n                        \n                        if (semiColonSplit[index].split('margin-bottom:')[1] !== undefined) {\n                            options.marginBottom = parseOption(semiColonSplit[index], 'margin-bottom');\n                        }\n                        \n                        if (semiColonSplit[index].split('margin-top:')[1] !== undefined) {\n                            options.marginTop = parseOption(semiColonSplit[index], 'margin-top');\n                        }\n                        \n                        if (semiColonSplit[index].split('modal-nav:')[1] !== undefined) {\n                            options.modalNav = parseOption(semiColonSplit[index], 'modal-nav');\n                        }\n                    });          \n                                        \n                    // Setup title attribute to be used later\n                    if (options.title) {\n                        modalBtn.setAttribute('data-view-markup-title', options.title);\n                    }\n\n                    // Btn x postion set\n                    // if (options.btnX && options.btnX === 'right') {\n                    //     modalBtn.style.left = 'auto';\n                    //     modalBtn.style.right = '0';\n                    // } else if (options.btnX && options.btnX === 'center') {\n                    //     modalBtn.style.left = 'calc(50% - ' + (modalBtn.offsetWidth / 2) + 'px)';\n                    // } else if (options.btnX) {\n                    //     modalBtn.style.left = options.btnX;\n                    // }\n\n                    // Btn x postion set\n                    if (options.btnX) {\n                        modalBtn.style.transform = 'translateX(' + options.btnX + ')';\n                    }\n\n                    // Btn y postion set\n                    if (options.btnY) {\n                        modalBtn.style.transform = 'translateY(' + options.btnY + ')';\n                    }\n\n                    // Btn both positions\n                    if (options.btnX && options.btnY) {\n                        modalBtn.style.transform = 'translateX(' + options.btnX + ') translateY(' + options.btnY + ')';\n                    }\n\n                    // Btn z-index\n                    if (options.btnZ) {\n                        modalBtn.style.zIndex = options.btnZ;\n                    }\n\n                    // Btn position\n                    if (options.btnPos) {\n                        modalBtn.style.position = options.btnPos;\n                    }\n                    \n                    // TODO: Btn color\n                    if (options.btnColor) {\n                        modalBtn.style.backgroundColor = options.btnColor;\n                    }\n\n                    // Append to selector\n                    if (options.btnAppendTo) {\n                        elBtnParent = document.querySelector(options.btnAppendTo);\n                        elBtnParent.appendChild(modalBtn);\n                    }\n\n                    // Prepend to selector\n                    if (options.btnPrependTo) {\n                        elBtnParent = document.querySelector(options.btnPrependTo);\n                        elBtnParent.prepend(modalBtn);\n                    }\n                    \n                    // Script selector\n                    if (options.scriptSelector) {\n                        modalBtn.setAttribute('data-view-markup-script-selector', options.scriptSelector);\n                    }\n                    \n                    // Backdrop rgba\n                    if (options.backdropRgb) {\n                        modalBtn.setAttribute('data-view-markup-backdrop-rgb', options.backdropRgb);\n                    }\n                    \n                    // In page rendering\n                    if (options.renderInPage) {\n                        modalBtn.setAttribute('data-view-markup-in-page', 'true');\n                    }\n                    \n                    // Modal navigation\n                    if (options.modalNav === 'true') {\n                        modalBtn.setAttribute('data-view-markup-modal-nav', 'true');\n                    }\n                    \n                    // Bottom margin for in page view\n                    if (options.marginBottom) {\n                        item.closest('.view-markup').style.marginBottom = options.marginBottom;\n                    }\n                    \n                    // Top margin for in page view\n                    if (options.marginTop) {\n                        item.closest('.view-markup').style.marginTop = options.marginTop;\n                    }\n                }   \n            });\n\n\n            // Check for preserve-attribute option\n            function leaveAttr(el) {\n                let optionPreserveAttr = null;\n                \n                if (el.getAttribute('data-view-markup').split(';')) {\n                    let semiColonSplit = el.getAttribute('data-view-markup').split(';');\n                    \n                    if (semiColonSplit[0].split('preserve-attribute:')[1] !== undefined) {\n                        optionPreserveAttr = semiColonSplit[0].split('preserve-attribute:')[1].trim();\n                    }\n                            \n                    if (optionPreserveAttr === 'true') {\n                        return true;\n                    } else {\n                        return false;\n                    }    \n                }\n            }\n            \n            function suppressClass(el) {\n                let optionSuppressClass = null;\n                \n                if (el.getAttribute('data-view-markup').split(';')) {\n                    let semiColonSplit = el.getAttribute('data-view-markup').split(';');\n                    \n                    if (semiColonSplit[0].split('suppress-class:')[1] !== undefined) {\n                        optionSuppressClass = semiColonSplit[0].split('suppress-class:')[1].trim();\n                        return optionSuppressClass;\n                    } else {\n                        return false;\n                    }\n                }\n            }\n\n            // Spit out option value\n            function parseOption(splitOn, optionString) {\n                return splitOn.split(optionString + ':')[1].trim();\n            }\n\n\n\n\n\n            // -----------------------------------------------------------------------------\n            // Custom styles added via js\n            // -----------------------------------------------------------------------------\n\n            // Create style tag to dump styles into for the markup modal\n            let textStyle = document.createElement('style');\n            textStyle.setAttribute('id', 'viewMarkupStyle');\n\n            // Import compressed styles as a string\n            let textStyleString = `//import view-markup.css`;\n\n            // Apply in page styles to style tag\n            textStyle.textContent = textStyleString;\n\n            // Add in page styles to head\n            document.head.appendChild(textStyle);\n\n\n\n\n\n            // -----------------------------------------------------------------------------\n            // Load external libraries\n            // -----------------------------------------------------------------------------\n\n            // TODO: import these through npm packages\n\n            // Highlight css and js CDN. Project repo: https://github.com/highlightjs/highlight.js/\n            let highlightVersionNumb = {\n                css: '10.7.2',\n                js: '11.3.1'\n            }\n            let themeCssDarkUrl = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/' + highlightVersionNumb.css + '/styles/atom-one-dark.min.css';\n            let themeCssLightUrl = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/' + highlightVersionNumb.css + '/styles/github.min.css';\n\n            let highlightCssUrl = (localStorage.getItem('checkedThemeColor') === null || localStorage.getItem('checkedThemeColor') === 'dark') ? themeCssDarkUrl : themeCssLightUrl;\n            let highlightScriptUrl = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/' + highlightVersionNumb.js + '/highlight.min.js';\n\n            // Beautify HTML CDN. Project repo: https://github.com/beautifier/beautifier.io\n            let beautifyVersionNumb = '1.14.0';\n            let beautifyScriptUrl = 'https://cdnjs.cloudflare.com/ajax/libs/js-beautify/' + beautifyVersionNumb + '/beautify-html.min.js';\n\n            // HTML2Canvas CDN\n            let html2CanvasVersionNumb = '1.4.1';\n            let html2CanvasScriptUrl = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/' + html2CanvasVersionNumb + '/html2canvas.min.js';\n\n            // Load highlight js/css external assets\n            loadExternalCss(highlightCssUrl);\n\n            // Initalize everything after getting beautify-html script\n            loadExternalJs(beautifyScriptUrl, loadFinalJS);\n            \n            // loadExternalJs(html2CanvasScriptUrl);\n\n            function loadFinalJS() {\n                loadExternalJs(highlightScriptUrl, viewMarkupInitialize);\n            }\n\n            function loadExternalJs(scriptSrc, callback) {\n                let head = document.getElementsByTagName('head')[0];\n                let script = document.createElement('script');\n                \n                script.src = scriptSrc;\n                \n                head.appendChild(script);\n                script.onload = callback;\n            }\n\n            // Run after getting beautify-html/highlight.io external assets\n            function loadExternalCss(url, callback) {\n                let head = document.getElementsByTagName('head')[0];\n                let link = document.createElement('link');\n                    \n                link.id = 'highlightJsCss';\n                link.rel = 'stylesheet';\n                link.href = url;\n                \n                link.onreadystatechange = callback;\n                link.onload = callback;\n                head.appendChild(link);\n            }\n\n\n\n\n\n            // -----------------------------------------------------------------------------\n            // Render modal\n            // -----------------------------------------------------------------------------\n                \n            // Setup modal outer div and attributes\n            modalEl.classList.add('view-markup-modal');\n            modalEl.setAttribute('id', 'viewMarkupModal');\n            modalEl.setAttribute('aria-labelledby', 'viewMarkupModalTitle');\n            modalEl.setAttribute('aria-modal', true);\n            modalEl.setAttribute('role', 'dialog');\n            modalEl.setAttribute('tabindex', '-1');\n\n            // Create modal dialog div\n            let modalDialog = document.createElement('div');\n\n            // Insert modal dialog element into outer modal element\n            modalDialog.classList.add('view-markup-modal__dialog');\n            modalEl.appendChild(modalDialog);\n\n            // Add the rest of the html string into modal dialog\n            modalDialog.innerHTML = markupContentHtmlString;\n            document.body.appendChild(modalEl);\n\n            // Set in page element\n            let wrapperEl = document.querySelectorAll('.view-markup');\n            wrapperEl.forEach(function (item) {\n                if (item.querySelector('[data-view-markup-in-page]')) {\n                    let inPageBlock = document.createElement('div');\n                    inPageBlock.classList.add('view-markup__in-page-view');\n                    item.appendChild(inPageBlock);\n                    inPageBlock.innerHTML = markupContentHtmlString;\n                }\n            });\n\n            // Assign in page unique ids and adjust aria-lablledby to match\n            let inPageContent = document.querySelectorAll('.view-markup__in-page-view .view-markup__content');\n            let inPageHeader = document.querySelectorAll('.view-markup__in-page-view .view-markup__header');\n            let modalSetSize = document.querySelectorAll('.view-markup__size-set');\n\n            inPageContent.forEach(function (item, index) {\n                inPageHeader[index].remove();\n                modalSetSize[index].remove();\n                \n                let allID = item.querySelectorAll('[id]');\n                let allFor = item.querySelectorAll('[for]');\n                let allAriaLabelledBy = item.querySelectorAll('[aria-labelledby]');\n\n                // Unique id\n                for (let x = 0; x < allID.length; x++) {\n                    allID[x].id = allID[x].id + '-' + index;\n                }\n                \n                // Unique for\n                for (let y = 0; y < allFor.length; y++) {\n                    let currentFor = allFor[y].getAttribute('for');\n                    allFor[y].setAttribute('for', currentFor + '-' + index);\n                }\n\n                // Unique aria-labelledby\n                for (let z = 0; z < allAriaLabelledBy.length; z++) {\n                    let currentAriaLabelledBy = allAriaLabelledBy[z].getAttribute('aria-labelledby');\n                    allAriaLabelledBy[z].setAttribute('aria-labelledby', currentAriaLabelledBy + '-' + index);\n                }\n            });\n\n            // When external assets are loaded run this\n            function readyAdjustments() {\n                wrapperEl.forEach(function (item, index) {\n                    \n                    // Tidy js\n                    if (item.querySelector('[data-view-markup-in-page]') && item.querySelector('[data-view-markup-script-selector]')) {\n                        let inPageCodeJsBlock = item.querySelector('.view-markup__code--js');\n                        let scriptSelector = item.querySelector('[data-view-markup-script-selector]').getAttribute('data-view-markup-script-selector');\n                        let scriptElement = document.querySelector(scriptSelector);\n                        let jsToTidy = scriptElement.outerHTML.toString().replace(/ id=\".*\"/g, '');\n                        \n                        let tidyJS = html_beautify(jsToTidy, {\n                            indent_size: getCachedSpaceTab(),\n                            space_in_empty_paren: true\n                        });\n                        \n                        inPageCodeJsBlock.textContent = tidyJS;\n                        hljs.highlightElement(inPageCodeJsBlock);\n                        \n                        if (inPageCodeJsBlock.textContent !== '') {\n                            inPageCodeJsBlock.closest('.view-markup__content').classList.add('view-markup-modal--has-js');\n                        }\n                    }\n                    \n                    // Tidy html\n                    if (item.querySelector('[data-view-markup-in-page]')) {\n                        let inPageCodeHtmlBlock = item.querySelector('.view-markup__code--html');\n                        let tidyHTML = html_beautify(elHtmlStripped[index], {\n                            indent_size: getCachedSpaceTab(),\n                            space_in_empty_paren: true\n                        });\n                        \n                        inPageCodeHtmlBlock.textContent = tidyHTML;\n                        hljs.highlightElement(inPageCodeHtmlBlock);\n                        \n                        // Remove uneeded modal button\n                        item.querySelector('[data-view-markup-in-page]').remove();\n                    }\n                });\n                \n                // Ready to initialize modal navigation\n                modalNavigation();\n                \n                // Add ready class on body\n                document.documentElement.classList.add('js-view-markup-ready');\n            }\n\n\n\n\n            // -----------------------------------------------------------------------------\n            // Cache rendered elements\n            // -----------------------------------------------------------------------------\n\n            let modalContent = document.querySelectorAll('.view-markup__content');\n            let modalCloseBtn = document.querySelectorAll('.view-markup__close-btn');\n            let copyBtn = document.querySelectorAll('.view-markup__copy-btn');\n            let settingsBtn = document.querySelectorAll('.view-markup__settings-btn');\n            let settingsDropdown = document.querySelectorAll('.view-markup__settings-dropdown');\n            let textArea = document.querySelectorAll('.view-markup__hidden-textarea');\n            let preEl = document.querySelectorAll('.view-markup__pre');\n            let htmlCodeEl = document.querySelectorAll('.view-markup__code--html');\n            let jsCodeEl = document.querySelectorAll('.view-markup__code--js');\n            let radio2Spaces = document.querySelectorAll('.view-markup__indent-2');\n            let radio4Spaces = document.querySelectorAll('.view-markup__indent-4');\n            let themeDark = document.querySelectorAll('.view-markup__theme-dark');\n            let themeLight = document.querySelectorAll('.view-markup__theme-light');\n            let fontSize = document.querySelectorAll('.view-markup__font-size');\n            let htmlTab = document.querySelectorAll('.view-markup__tabs-button--html');\n            let jsTab = document.querySelectorAll('.view-markup__tabs-button--js');\n            let inPageCodeBlock = document.querySelectorAll('.view-markup-in-page');\n\n            // Modal specific elements\n            let modalCodeHtmlEL = document.querySelector('.view-markup-modal .view-markup__code--html');\n            let modalContentEl = document.querySelector('.view-markup-modal .view-markup__content');\n            let modalTitleEl = document.querySelector('.view-markup-modal .view-markup__title');\n            let modalSizeMedium = document.querySelectorAll('.view-markup__size-medium');\n            let modalSizeLarge = document.querySelectorAll('.view-markup__size-large');\n            let modalCodeJsEL = document.querySelectorAll('.view-markup-modal .view-markup__code--js');\n\n\n\n\n\n\n\n\n            // -----------------------------------------------------------------------------\n            // Setup cached settings\n            // -----------------------------------------------------------------------------\n\n            // Select cached tabspaces radio\n            if (localStorage.getItem('checkedSpaceTab') === null || localStorage.getItem('checkedSpaceTab') === '4' ) {\n                radio4Spaces.forEach(function (item) {\n                    item.checked = true;\n                });\n            } else {\n                radio2Spaces.forEach(function (item) {\n                    item.checked = true;\n                });\n            }\n\n\n            // Select cached theme radio\n            if (localStorage.getItem('checkedThemeColor') === null || localStorage.getItem('checkedThemeColor') === 'dark') {\n                themeDark.forEach(function (item) {\n                    item.checked = true;\n                });\n            } else {\n                themeLight.forEach(function (item) {\n                    item.checked = true;\n                });\n                document.documentElement.classList.add('js-view-markup-theme-light');\n            }\n\n\n            // Select cached modal size radio\n            if (localStorage.getItem('checkedModalSize') === null || localStorage.getItem('checkedModalSize') === 'medium' ) {\n                modalSizeMedium.forEach(function (item) {\n                    item.checked = true;\n                });\n            } else {\n                modalSizeLarge.forEach(function (item) {\n                    item.checked = true;\n                });\n                document.body.classList.add('js-view-markup-size-large');\n            } \n\n\n            // Get cached font-size\n            if (localStorage.getItem('fontSizevalue') === null ) {\n                fontSize.forEach(function (item) {\n                    item.value = '13';\n                });\n            } else {\n                let currentValue = localStorage.getItem('fontSizevalue');\n                \n                fontSize.forEach(function (item) {\n                    item.value = localStorage.getItem('fontSizevalue');\n                });\n\n                preEl.forEach(function (item, index) {\n                    item.style.fontSize = currentValue + 'px';\n                });\n            }\n\n            // Font code font size\n            fontSize.forEach(function (item, index) {\n                item.addEventListener('change', function () {\n                    let currentValue = item.value;\n                    \n                    localStorage.setItem('fontSizevalue', currentValue);\n\n                    fontSize.forEach(function (item, index) {\n                        item.value = currentValue\n                    });\n\n                    preEl.forEach(function (item, index) {\n                        item.style.fontSize = currentValue + 'px';\n                    });\n                });\n            });\n\n\n\n\n            // -----------------------------------------------------------------------------\n            // Modal and code controls\n            // -----------------------------------------------------------------------------\n\n            // Copy button\n            copyBtn.forEach(function (item, index) {\n                item.addEventListener('click', function () {\n                    let currentShowingCode;\n                    let closestElement = item.closest('.view-markup__content');\n                    let currentCode = closestElement.querySelectorAll('.view-markup__code');\n                            \n                    for (let i = 0; i < currentCode.length; i++) {\n                        if (currentCode[i].offsetWidth > 0 && currentCode[i].offsetHeight > 0) {\n                            currentShowingCode = currentCode[i];\n                        }\n                    }\n                            \n                    applyTidyCodeToTextArea(currentShowingCode.textContent, getCachedSpaceTab(), index);\n                    \n                    applyCopyBtnState('disabled');\n\n                    navigator.clipboard.writeText(textArea[index].value);\n                });\n            });\n\n            // Tabspaces (2) radio change event listeners\n            radio2Spaces.forEach(function (item, index) {\n                item.addEventListener('change', function () {\n                    if (this.checked === true) {\n                        \n                        // Remember tab checked radio\n                        localStorage.setItem('checkedSpaceTab', 2);\n                        \n                        radio4Spaces.forEach(function (item, index) {\n                            item.checked = false;\n                        });\n                        \n                        radio2Spaces.forEach(function (item, index) {\n                            item.checked = true;\n                        });\n                        \n                        // Set to 2 tabs\n                        htmlCodeEl.forEach(function (item) {\n                            applyCleanHtml(item.textContent, 4, null, item);\n                        });\n                        \n                        // Apply clean js\n                        applyCleanJs(2, null, true, jsCodeEl);\n                                                \n                        // Set copy button state\n                        applyCopyBtnState('enabled');\n                        \n                        this.focus();\n                    }\n                });\n            });\n\n            // Tabspaces (4) radio change event listeners\n            radio4Spaces.forEach(function (item, index) {\n                item.addEventListener('change', function () {\n                    if (this.checked === true) {\n                        \n                        // Remember tab checked radio\n                        localStorage.setItem('checkedSpaceTab', 4);\n                        \n                        radio2Spaces.forEach(function (item, index) {\n                            item.checked = false;\n                        });\n                        \n                        radio4Spaces.forEach(function (item, index) {\n                            item.checked = true;\n                        });\n                        \n                        // Set to 4 tabs\n                        htmlCodeEl.forEach(function (item) {\n                            applyCleanHtml(item.textContent, 4, null, item);\n                        });\n                        \n                        // Apply clean js\n                        applyCleanJs(4, null, true, jsCodeEl);\n                        \n                        // Set copy button state\n                        applyCopyBtnState('enabled');\n                        \n                        this.focus();\n                    }\n                });\n            });\n\n\n            // Dark theme radio change event listeners\n            themeDark.forEach(function (item) {\n                item.addEventListener('change', function () {\n                    if (this.checked === true) {\n                        \n                        themeLight.forEach(function (item, index) {\n                            item.checked = false;\n                        });\n                        \n                        themeDark.forEach(function (item, index) {\n                            item.checked = true;\n                        });\n                        \n                        // Remember tab checked radio\n                        localStorage.setItem('checkedThemeColor', 'dark');\n                        document.documentElement.classList.remove('js-view-markup-theme-light');\n                        document.getElementById('highlightJsCss').href = themeCssDarkUrl;\n                    }\n                });\n            });\n\n            // Light theme radio change event listeners\n            themeLight.forEach(function (item) {\n                item.addEventListener('change', function () {\n                    if (this.checked === true) {\n                        \n                        themeDark.forEach(function (item, index) {\n                            item.checked = false;\n                        });\n                        \n                        themeLight.forEach(function (item, index) {\n                            item.checked = true;\n                        });\n                        \n                        // Remember tab checked radio\n                        localStorage.setItem('checkedThemeColor', 'light');\n                        document.documentElement.classList.add('js-view-markup-theme-light');\n                        document.getElementById('highlightJsCss').href = themeCssLightUrl;\n                    }\n                });\n            });\n\n            // Medium modal size radio change event listeners\n            modalSizeMedium.forEach(function (item) {\n                item.addEventListener('change', function () {\n                    if (this.checked === true) {\n                        \n                        modalSizeLarge.forEach(function (item, index) {\n                            item.checked = false;\n                        });\n                        \n                        modalSizeMedium.forEach(function (item, index) {\n                            item.checked = true;\n                        });\n                        \n                        // Remember tab checked radio\n                        localStorage.setItem('checkedModalSize', 'medium');\n                        document.body.classList.remove('js-view-markup-size-large');\n                    }\n                });\n            });\n\n            // Large modal size radio change event listeners\n            modalSizeLarge.forEach(function (item) {\n                item.addEventListener('change', function () {\n                    if (this.checked === true) {\n                        \n                        modalSizeMedium.forEach(function (item, index) {\n                            item.checked = false;\n                        });\n                        \n                        modalSizeLarge.forEach(function (item, index) {\n                            item.checked = true;\n                        });\n                        \n                        // Remember tab checked radio\n                        localStorage.setItem('checkedModalSize', 'large');\n                        document.body.classList.add('js-view-markup-size-large');\n                    }\n                });\n            });\n\n\n\n\n\n            // -----------------------------------------------------------------------------\n            // HTML/JS tab toggling\n            // -----------------------------------------------------------------------------\n\n            htmlTab.forEach(function (item, index) {\n                item.addEventListener('click', function () {\n                    applyCopyBtnState('enabled');\n                    this.closest('.view-markup__content').classList.remove('view-markup--js-tab-showing');\n                });\n            });\n\n            jsTab.forEach(function (item, index) {\n                item.addEventListener('click', function () {\n                    applyCopyBtnState('enabled');\n                    this.closest('.view-markup__content').classList.add('view-markup--js-tab-showing');\n                });\n            });\n\n\n\n\n\n\n\n            // -----------------------------------------------------------------------------\n            // Exiting the modal\n            // -----------------------------------------------------------------------------\n\n            // Hide modal by clicking outside of it\n            modalEl.addEventListener('mousedown', function (event) {\n                let isClickInside = false;\n                \n                modalContent.forEach(function (item) {\n                    if ( item.contains(event.target) ) {\n                        isClickInside = true;\n                    }\n                });\n                \n                if (!isClickInside && this.classList.contains('view-markup-modal--showing')) {\n                    modalHide();\n                }\n            });\n\n            // Hide modal with close and cancel button click\n            modalCloseBtn.forEach(function (item) {\n                item.addEventListener('click', function () {\n                    modalHide();\n                });\n            });\n\n            // Hide modal with esc key\n            modalEl.addEventListener('keydown', function (e) {\n                let key = e.key;\n\n                if (key === 'Escape' && document.documentElement.classList.contains('js-view-markup-modal-showing')) {\n                    modalHide();\n                }\n            });\n\n\n\n\n\n            // -----------------------------------------------------------------------------\n            // Settings dropdown functionality\n            // -----------------------------------------------------------------------------\n\n            let optionDropdownClass = 'view-markup__settings-dropdown--showing';\n\n            // Settings dropdown\n            settingsBtn.forEach(function (item, index) {\n                item.addEventListener('click', function () {\n                    let ariaExpandedAttr = this.getAttribute('aria-expanded');\n\n                    this.setAttribute('aria-expanded', (ariaExpandedAttr === 'true') ? 'false' : 'true');\n                    settingsDropdown[index].classList.toggle(optionDropdownClass);\n                });\n            });\n\n            // Hide settings dropdown by clicking outside of it\n            document.addEventListener('mousedown', function (event) {\n                settingsDropdown.forEach(function (item, index) {\n                    let isClickInside = item.contains(event.target);\n\n                    if (\n                        !event.target.classList.contains('view-markup__settings-btn') &&\n                        item.classList.contains(optionDropdownClass) &&\n                        !isClickInside\n                    ) {\n                        settingsBtn[index].setAttribute('aria-expanded', false);\n                        item.classList.remove(optionDropdownClass);\n                    }\n                });\n            });\n\n            // Focus out of dropdown\n            // settingsDropdown.addEventListener('focusout', function (event) {\n            //     settingsBtn.setAttribute('aria-expanded', false);\n            //     settingsDropdown.classList.remove(optionDropdownClass);\n            // });\n\n\n\n\n\n            // -----------------------------------------------------------------------------\n            // Functions\n            // -----------------------------------------------------------------------------\n\n            // Function properly assigns untouched DOM html modal\n            function viewMarkupInitialize() {\n                elHtmlStripped.forEach(function (item, index) {\n                    \n                    // Assign modal button to correct html to view\n                    let modalParent = viewMarkupEl[index].closest('.view-markup') || viewMarkupEl[index];\n                    let modalBtnEL = modalParent.querySelector('.view-markup__modal-btn');\n\n                    // Crack open the modal with the correct html in view\n                    modalMapping(item, 2, modalBtnEL, null);\n                });\n                \n                readyAdjustments();\n            }\n\n            // Cleanup and highlight markup\n            function applyCleanHtml(html, spaces, btnEl, codeEl) {\n                let tidyHTML = html_beautify(html, { indent_size: getCachedSpaceTab(), space_in_empty_paren: true });\n                    \n                codeEl.textContent = tidyHTML;\n                \n                hljs.highlightElement(codeEl);\n            }\n\n            // Cleanup and highlight associated js\n            function applyCleanJs(spaces, btnEl, setTabSpaces, jsCodeEl) {    \n                for (let i = 0; i < jsCodeEl.length; i++) {\n                    if (jsCodeEl[i] !== undefined) {\n                        let jsToTidy;\n                                \n                        if (setTabSpaces) {\n                            jsToTidy = jsCodeEl[i].textContent;\n                        } else if (btnEl !== null && btnEl.hasAttribute('data-view-markup-script-selector')) {\n                            let scriptElement = document.querySelector(btnEl.getAttribute('data-view-markup-script-selector'));\n                            jsToTidy = scriptElement.outerHTML.toString().replace(/ id=\".*\"/g, '');\n                        }\n                                \n                        jsCodeEl[i].textContent = '';\n                        \n                        let tidyJs = html_beautify(jsToTidy, { indent_size: getCachedSpaceTab(), space_in_empty_paren: true });\n                        \n                        jsCodeEl[i].textContent = tidyJs;\n                        \n                        hljs.highlightElement(jsCodeEl[i]);\n                    }\n                }\n            }\n\n            // Return cached space/tab amount\n            function getCachedSpaceTab() {\n                let checkedSpacesRadio;\n                if (localStorage.getItem('checkedSpaceTab') === null) {\n                    checkedSpacesRadio = (radio2Spaces[0].checked === true) ? 2 : 4;\n                } else {\n                    checkedSpacesRadio = localStorage.getItem('checkedSpaceTab');\n                }\n                return checkedSpacesRadio;\n            }\n\n            // Populate hidden textarea with tidy html/js for copy button\n            function applyTidyCodeToTextArea(code, spaceTabRadio, index) {\n                let tidyCode = html_beautify(code, { indent_size: spaceTabRadio, space_in_empty_paren: true });\n                textArea[index].textContent = tidyCode;\n                return;\n            }\n\n            // Function that gets html, beautifies it, and displays it in a modal\n            let currentViewMarkupIndex;\n            function modalMapping(html, spaces, btnEl) {    \n                btnEl.addEventListener('click', function () {        \n                    \n                    // Current modal button index (used for modal navigation)\n                    currentViewMarkupIndex = this.getAttribute('data-view-markup-nav-index');\n                    \n                    // screenShotDomElement(viewMarkupEl[currentViewMarkupIndex]);\n\n                    // Clean html\n                    applyCleanHtml(html, spaces, this, modalCodeHtmlEL);\n                    \n                    // Clean js\n                    applyCleanJs(spaces, this, null, modalCodeJsEL);\n\n                    modalContentEl.classList.remove('view-markup--js-tab-showing');\n                    \n                    jsCodeEl.forEach(function (item) {\n                        if (item.textContent !== '') {\n                            modalContentEl.classList.add('view-markup-modal--has-js');\n                        } else {\n                            modalContentEl.classList.remove('view-markup-modal--has-js');\n                        }\n                    });\n                    \n                    modalShow();\n                    \n                    applyCopyBtnState('enabled');\n\n                    // Add option title to modal title if there is one\n                    if (btnEl.hasAttribute('data-view-markup-title')) {\n                        let cleanTitle = btnEl.getAttribute('data-view-markup-title').replace(/^'(.*)'$/, '$1');\n                        modalTitleEl.textContent = cleanTitle;\n                    } else {\n                        modalTitleEl.textContent = 'Viewing markup';\n                    }\n                    \n                    // Add option backdrop rgb to modal back\n                    if (btnEl.hasAttribute('data-view-markup-backdrop-rgb')) {\n                        modalEl.style.backgroundColor = 'rgba(' + options.backdropRgb + ', .7)';\n                    } else {\n                        modalEl.style.backgroundColor = '';\n                    }\n                });\n            }\n\n            // Apply copy button state\n            function applyCopyBtnState(state) {\n                let clickedButton = document.querySelectorAll('.view-markup__copy-btn:focus');\n                if (state === 'disabled') {\n                    clickedButton.forEach(function (item) {\n                        item.textContent = 'Copied';\n                        item.setAttribute('disabled', 'disabled');\n                    });\n                } else if (state === 'enabled') {\n                    copyBtn.forEach(function (item) {\n                        item.textContent = 'Copy';\n                        item.removeAttribute('disabled');\n                    });\n                }\n            }\n\n            // Wrap in tag\n            function wrapElement(el, wrapper) {\n                el.parentNode.insertBefore(wrapper, el);\n                wrapper.appendChild(el);\n            }\n\n            // Insert after\n            function insertAfter(newNode, existingNode) {\n                existingNode.parentNode.insertBefore(newNode, existingNode.nextSibling);\n            }\n\n            // Show modal\n            let focusedElementBeforeModal;\n            function modalShow() {\n                document.documentElement.classList.add('js-view-markup-modal-showing');\n                modalEl.classList.add('view-markup-modal--showing');\n                \n                // Save current focus\n                focusedElementBeforeModal = document.activeElement;\n\n                // Listen for and trap the keyboard\n                modalEl.addEventListener('keydown', trapTabKey);\n                \n                // Find all focusable children\n                let focusableElementsString =\n                    'a[href],' +\n                    'area[href],' +\n                    'input,' +\n                    'select:not([disabled]),' +\n                    'textarea:not([tabindex=\"-1\"]),' +\n                    'button:not([disabled]),' +\n                    'iframe,' +\n                    'object,' +\n                    'embed,' +\n                    '[tabindex=\"0\"],' +\n                    '[contenteditable]';\n                    \n                let focusableElements = modalEl.querySelectorAll(focusableElementsString);\n                \n                // Convert NodeList to Array\n                focusableElements = Array.prototype.slice.call(focusableElements);\n\n                let firstTabStop = focusableElements[0];\n                let lastTabStop = focusableElements[focusableElements.length - 1];\n                \n                // Set initial focus on the modal\n                modalEl.focus();\n                \n                function trapTabKey(e) {\n                    \n                    // Check for TAB key press\n                    if (e.keyCode === 9) {\n\n                        // SHIFT + TAB\n                        if (e.shiftKey) {\n                            if (document.activeElement === firstTabStop) {\n                                e.preventDefault();\n                                lastTabStop.focus();\n                            }\n\n                        // TAB\n                        } else {\n                            if (document.activeElement === lastTabStop) {\n                                e.preventDefault();\n                                firstTabStop.focus();\n                            }\n                        }\n                    }\n                }\n            }\n\n            // Hide modal\n            function modalHide() {\n                document.documentElement.classList.remove('js-view-markup-modal-showing');\n                modalEl.classList.remove('view-markup-modal--showing');\n                applyCopyBtnState('enabled');\n                focusedElementBeforemodalEl.focus();\n            }\n\n            // Go to previous/next view markup element\n            function modalNavigate(el, direction) {\n                let mapToModalBtnIndex;\n                \n                if (direction === 'prev') {\n                    mapToModalBtnIndex = (parseInt(currentViewMarkupIndex) === 0) ? parseInt(elAmount) - 1 : parseInt(currentViewMarkupIndex) - 1;\n                } else if (direction === 'next') {\n                    mapToModalBtnIndex = (parseInt(currentViewMarkupIndex) === parseInt(elAmount) - 1) ? 0 : parseInt(currentViewMarkupIndex) + 1;\n                }\n                    \n                let mapToModalBtnSelector = '[data-view-markup-nav-index=\"' + mapToModalBtnIndex + '\"]';\n                let mapToModalBtn = document.querySelector(mapToModalBtnSelector.toString());\n                \n                document.documentElement.classList.add('js-view-markup-modal-showing--navigating');\n                \n                mapToModalBtn.click();\n                mapToModalBtn.focus();\n                \n                setTimeout(function () {\n                    document.documentElement.classList.remove('js-view-markup-modal-showing--navigating');\n                }, 300);\n            }\n\n            // Modal navigation arrows\n            function modalNavigation() {    \n                \n                // Add index to modal buttons for navigation\n                let modalNavEl = document.querySelector('.view-markup__nav');\n                let modalBtn = document.querySelectorAll('.view-markup__modal-btn');\n                \n                elAmount = modalBtn.length;\n                \n                modalBtn.forEach(function (item, index) {\n                    item.setAttribute('data-view-markup-nav-index', index);\n                });\n                \n                if (elAmount > 1) {\n\n                    // Modal previous button\n                    let modalPrevBtn = modalEl.querySelector('.view-markup__prev-btn');\n\n                    // Modal next button\n                    let modalNextBtn = modalEl.querySelector('.view-markup__next-btn');\n                    \n                    // Modal previous button click\n                    modalPrevBtn.addEventListener('click', function () {\n                        modalNavigate(this, 'prev');\n                    });\n\n                    // Modal next button click\n                    modalNextBtn.addEventListener('click', function () {\n                        modalNavigate(this, 'next');\n                    });  \n                } else {\n\n                    // Remove modal nav if only 1 item\n                    modalNavEl.remove();\n                }\n                \n                if (modalNav === null) {\n                \n                    // Remove modal nav if no setting is found\n                    modalNavEl.remove();\n                }\n            }\n\n\n\n\n            \n            /* -----------------------------------------------------------------------------\n                EXPIREMENTAL WIP: prototype floating the buttons over the page instead of\n                wrapping each element in a div and then positioning it inside that div. Not\n                a fan of how much it currently modifies the DOM to get the modal button next\n                to the associated element correctly\n\n                TODOS:\n                ✓ Allow for dynamic button positioning\n                • Add \"Skip to view markup modal navigation\" skip link\n                • Add visual focus indicator to modal button when focus in the background\n                when using modal navigation.\n                ✓ Set smooth scrolling on the html,body when modal is active\n                • Enhance preserve attribute functionality a bit. (allow for top and inner)\n            ----------------------------------------------------------------------------- */\n\n            // Render image of view-markup element\n            function screenShotDomElement(el) {\n                html2canvas(el).then(function(canvas) {\n                    document.body.appendChild(canvas);\n                });\n            }\n\n            // Unwrap function\n            function unwrap(wrapper) {\n                let docFrag = document.createDocumentFragment();\n                \n                while (wrapper.firstChild) {\n                    let child = wrapper.removeChild(wrapper.firstChild);\n                    docFrag.appendChild(child);\n                }\n\n                wrapper.parentNode.replaceChild(docFrag, wrapper);\n            }\n\n            // Debounce function (throttle window resize)\n            function debounce(func) {\n                let timer;\n\n                return (event) => {\n                    if (timer) {\n                        clearTimeout(timer);\n                    }\n                    timer = setTimeout(func, 1000, event);\n                };\n            }\n\n            // Get query params if any\n            let scriptLinkage = document.getElementById('view-markup-js');\n            let modalNav = null;\n            let dynamicPos = null;\n            let dynamicPosZIndex = null;\n\n            if (scriptLinkage) {\n                let urlParam = new URLSearchParams(scriptLinkage.getAttribute('src').split('?')[1]);\n                modalNav = urlParam.get('modal-nav');\n                dynamicPos = urlParam.get('dynamic-pos');\n                dynamicPosZIndex = urlParam.get('z-index');\n\n                // If dynamic position query param is set, do some stuff\n                if (dynamicPos !== null) {\n                    window.addEventListener('load', () => {\n                    \n                        // Create new div that will contain all modal buttons\n                        let floatingButtonHolder = document.createElement('div');\n                        floatingButtonHolder.classList.add('view-markup-dynamic-nav');\n                        \n                        if (dynamicPosZIndex !== null) {\n                            floatingButtonHolder.style.zIndex = dynamicPosZIndex.toString();\n                        }\n                        \n                        document.body.appendChild(floatingButtonHolder);\n                \n                        // Cache elements with modals\n                        let withmodalEl = document.querySelectorAll('[data-view-markup]:not([data-view-markup-render-in-page])');\n                        \n                        // Re-cache remaining buttons\n                        let floatingModalBtn = document.querySelectorAll('.view-markup__modal-btn');\n                        \n                        // Dynamically position modal button next to associated element\n                        function positionModalBtns(load) {\n                            \n                            // Add inline css to position button at the top left of the element\n                            withmodalEl.forEach( (item, i) => {\n                                let btnElement = floatingModalBtn[i];\n                \n                                btnElement.style.top = (item.getBoundingClientRect().top + window.scrollY) + 'px';\n                                btnElement.style.left = item.getBoundingClientRect().left + 'px';\n                \n                                if (load === 'load') {\n                                    floatingButtonHolder.appendChild(btnElement);\n                                }\n                            });\n                        }\n                        \n                        // Remove un-needed highlight divs\n                        let highlightElement = document.querySelectorAll('.view-markup__highlight');\n                        highlightElement.forEach( (item) => {\n                            item.remove();\n                        });\n                \n                        // Unwrap view-markup div\n                        wrapperEl.forEach( (item) => {\n                            unwrap(item);\n                        });\n                        \n                        // Position buttons on load\n                        positionModalBtns('load');\n                        \n                        // Position buttons after resize\n                        window.addEventListener('resize', debounce( () => {\n                            positionModalBtns();\n                        }));\n                    });\n                }\n            }\n        }\n    });\n})();"]}