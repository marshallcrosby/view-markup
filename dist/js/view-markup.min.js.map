{"version":3,"sources":["view-markup.js"],"names":["viewMarkupEl","document","querySelectorAll","length","options","elHtmlInitial","elHtmlStripped","elAmount","modal","createElement","markupContentHtmlString","suppressClass","el","optionSuppressClass","getAttribute","split","semiColonSplit","undefined","trim","parseOption","splitOn","optionString","forEach","item","index","outerHTML","toString","optionPreserveAttr","leaveAttr","replace","sRegExInput","RegExp","console","log","modalBtn","classList","add","setAttribute","innerHTML","nodeName","toLowerCase","wrapperDivBody","body","prepend","appendChild","markupWrapperDiv","wrapper","parentNode","insertBefore","title","btnX","btnY","btnZ","btnPos","btnAppendTo","btnPrependTo","btnColor","scriptSelector","backdropRgb","renderInPage","marginBottom","marginTop","modalNav","currentElement","style","transform","zIndex","position","backgroundColor","elBtnParent","querySelector","closest","textStyle","textStyleString","textContent","head","highlightVersionNumb","css","js","themeCssDarkUrl","themeCssLightUrl","highlightCssUrl","localStorage","getItem","highlightScriptUrl","beautifyScriptUrl","loadExternalJs","scriptSrc","callback","getElementsByTagName","script","src","onload","url","link","id","rel","href","onreadystatechange","loadExternalCss","viewMarkupInitialize","modalDialog","wrapperEl","inPageBlock","inPageContent","inPageHeader","modalSetSize","readyAdjustments","inPageCodeJsBlock","jsToTidy","tidyJS","html_beautify","indent_size","getCachedSpaceTab","space_in_empty_paren","hljs","highlightElement","inPageCodeHtmlBlock","tidyHTML","remove","modalNavEl","modalPrevBtn","modalNextBtn","addEventListener","modalNavigate","this","modalNavigation","documentElement","allID","allFor","allAriaLabelledBy","x","y","currentFor","z","currentAriaLabelledBy","modalContent","modalCloseBtn","copyBtn","settingsBtn","settingsDropdown","textArea","preEl","htmlCodeEl","jsCodeEl","radio2Spaces","radio4Spaces","themeDark","themeLight","fontSize","htmlTab","jsTab","modalCodeHtmlEL","modalContentEl","modalTitleEl","modalSizeMedium","modalSizeLarge","modalCodeJsEL","checked","value","currentValue","setItem","currentShowingCode","currentCode","i","offsetWidth","offsetHeight","code","spaceTabRadio","tidyCode","applyTidyCodeToTextArea","applyCopyBtnState","navigator","clipboard","writeText","applyCleanHtml","applyCleanJs","focus","getElementById","event","isClickInside","contains","target","modalHide","e","key","currentViewMarkupIndex","focusedElementBeforeModal","optionDropdownClass","modalBtnEL","html","spaces","btnEl","activeElement","keyCode","shiftKey","firstTabStop","preventDefault","lastTabStop","focusableElements","Array","prototype","slice","call","modalShow","hasAttribute","cleanTitle","codeEl","setTabSpaces","tidyJs","checkedSpacesRadio","state","clickedButton","removeAttribute","direction","mapToModalBtnIndex","parseInt","mapToModalBtnSelector","mapToModalBtn","click","setTimeout","ariaExpandedAttr","toggle","scriptLinkage","dynamicPos","dynamicPosZIndex","urlParam","URLSearchParams","get","window","floatingButtonHolder","withModalEl","floatingModalBtn","positionModalBtns","load","btnElement","top","getBoundingClientRect","scrollY","left","docFrag","createDocumentFragment","firstChild","child","removeChild","replaceChild","unwrap","func","timer","clearTimeout","debounce"],"mappings":"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","sourcesContent":["/*!\n    * View markup v1.1.6\n    * Plugin that makes it easy for developers to view and copy the html needed for a component.\n    *\n    * Copyright 2021-2022 Marshall Crosby\n    * https://marshallcrosby.com\n*/\n\n// Cache view markup elements immediately.\nconst viewMarkupEl = document.querySelectorAll('[data-view-markup]');\n\n(function () {\n    \"use strict\"\n\n    // -----------------------------------------------------------------------------\n    // Setup outer div and modal btn (with options)\n    // -----------------------------------------------------------------------------\n\n\n    if (viewMarkupEl.length > 0) {\n        \n        let elHtmlInitial = [];\n        let elHtmlStripped = [];\n        let elAmount = 0;\n        let options;\n\n        // Declare base modal element right away to add some data attributes to\n        let modal = document.createElement('div');\n\n        let markupContentHtmlString = `//import _view-markup-modal.html`;\n\n        viewMarkupEl.forEach(function (item, index) {\n            \n            // Cache all viewable markup elements\n            elHtmlInitial[index] = viewMarkupEl[index].outerHTML.toString();\n\n            // Remove the view markup specific data attributes\n            if (!leaveAttr(viewMarkupEl[index])) {\n                elHtmlStripped[index] = elHtmlInitial[index].replace(/data-view-markup=\".*\"/, '');\n            }\n\n            // Remove class\n            if (suppressClass(viewMarkupEl[index])) {\n                var sRegExInput = new RegExp(suppressClass(viewMarkupEl[index]), 'g');\n                elHtmlStripped[index] = elHtmlInitial[index].replace(sRegExInput, '');\n                console.log(elHtmlStripped[index]);\n            }\n            \n            // Create modal button\n            let modalBtn = document.createElement('button');\n            modalBtn.classList.add('view-markup__modal-btn');\n            modalBtn.setAttribute('type', 'button');\n            modalBtn.innerHTML = '<span class=\"view-markup__modal-btn-text\">View markup</span>';\n                \n            // if <html> or <body> do things a bit differently\n            if (viewMarkupEl[index].nodeName.toLowerCase()  === 'body' || viewMarkupEl[index].nodeName.toLowerCase()  === 'html') {\n                let wrapperDivBody = document.createElement('div');\n                wrapperDivBody.classList.add('view-markup');\n                wrapperDivBody.classList.add('view-markup--body');\n                document.body.prepend(wrapperDivBody);\n                wrapperDivBody.appendChild(modalBtn);\n            } else {\n                \n                // Wrap in div\n                let markupWrapperDiv = document.createElement('div');\n                markupWrapperDiv.classList.add('view-markup');\n                markupWrapperDiv.innerHTML = '<div class=\"view-markup__highlight\"></div>';\n                wrapElement(viewMarkupEl[index], markupWrapperDiv);\n                markupWrapperDiv.prepend(modalBtn);\n            }\n            \n            options = {\n                title: null,\n                btnX: null,\n                btnY: null,\n                btnZ: null,\n                btnPos: null,\n                btnAppendTo: null,\n                btnPrependTo: null,\n                btnColor: null,\n                scriptSelector: null,\n                backdropRgb: null,\n                renderInPage: null,\n                marginBottom: null,\n                marginTop: null,\n                modalNav: null\n            };\n                \n            // Apply some options to toggle if available\n            let currentElement = viewMarkupEl[index];\n            if (currentElement.getAttribute('data-view-markup') !== '') {\n                let semiColonSplit = viewMarkupEl[index].getAttribute('data-view-markup').split(';');\n                \n                // Assign option values if any\n                semiColonSplit.forEach(function (item, index) {\n                    if (semiColonSplit[index].split('title:')[1] !== undefined) {\n                        options.title = parseOption(semiColonSplit[index], 'title');\n                    }\n\n                    if (semiColonSplit[index].split('btn-x:')[1] !== undefined) {\n                        options.btnX = parseOption(semiColonSplit[index], 'btn-x');\n                    }\n                    \n                    if (semiColonSplit[index].split('btn-y:')[1] !== undefined) {\n                        options.btnY = parseOption(semiColonSplit[index], 'btn-y');\n                    }\n                    \n                    if (semiColonSplit[index].split('btn-z:')[1] !== undefined) {\n                        options.btnZ = parseOption(semiColonSplit[index], 'btn-z');\n                    }\n                    \n                    if (semiColonSplit[index].split('btn-pos:')[1] !== undefined) {\n                        options.btnPos = parseOption(semiColonSplit[index], 'btn-pos');\n                    }\n                    \n                    if (semiColonSplit[index].split('btn-append-to:')[1] !== undefined) {\n                        options.btnAppendTo = parseOption(semiColonSplit[index], 'btn-append-to');\n                    }\n                    \n                    if (semiColonSplit[index].split('btn-prepend-to:')[1] !== undefined) {\n                        options.btnPrependTo = parseOption(semiColonSplit[index], 'btn-prepend-to');\n                    }\n                    \n                    if (semiColonSplit[index].split('btn-color:')[1] !== undefined) {\n                        options.btnColor = parseOption(semiColonSplit[index], 'btn-color');\n                    }\n                    \n                    if (semiColonSplit[index].split('associated-script:')[1] !== undefined) {\n                        options.scriptSelector = parseOption(semiColonSplit[index], 'associated-script');\n                    }\n                    \n                    if (semiColonSplit[index].split('backdrop-rgb:')[1] !== undefined) {\n                        options.backdropRgb = parseOption(semiColonSplit[index], 'backdrop-rgb');\n                    }\n                    \n                    if (semiColonSplit[index].split('render-in-page:')[1] !== undefined) {\n                        options.renderInPage = parseOption(semiColonSplit[index], 'render-in-page');\n                        currentElement.setAttribute('data-view-markup-render-in-page', '');\n                    }\n                    \n                    if (semiColonSplit[index].split('margin-bottom:')[1] !== undefined) {\n                        options.marginBottom = parseOption(semiColonSplit[index], 'margin-bottom');\n                    }\n                    \n                    if (semiColonSplit[index].split('margin-top:')[1] !== undefined) {\n                        options.marginTop = parseOption(semiColonSplit[index], 'margin-top');\n                    }\n                    \n                    if (semiColonSplit[index].split('modal-nav:')[1] !== undefined) {\n                        options.modalNav = parseOption(semiColonSplit[index], 'modal-nav');\n                    }\n                });          \n                                    \n                // Setup title attribute to be used later\n                if (options.title) {\n                    modalBtn.setAttribute('data-view-markup-title', options.title);\n                }\n\n                // Btn x postion set\n                // if (options.btnX && options.btnX === 'right') {\n                //     modalBtn.style.left = 'auto';\n                //     modalBtn.style.right = '0';\n                // } else if (options.btnX && options.btnX === 'center') {\n                //     modalBtn.style.left = 'calc(50% - ' + (modalBtn.offsetWidth / 2) + 'px)';\n                // } else if (options.btnX) {\n                //     modalBtn.style.left = options.btnX;\n                // }\n\n                // Btn x postion set\n                if (options.btnX) {\n                    modalBtn.style.transform = 'translateX(' + options.btnX + ')';\n                }\n\n                // Btn y postion set\n                if (options.btnY) {\n                    modalBtn.style.transform = 'translateY(' + options.btnY + ')';\n                }\n\n                // Btn both positions\n                if (options.btnX && options.btnY) {\n                    modalBtn.style.transform = 'translateX(' + options.btnX + ') translateY(' + options.btnY + ')';\n                }\n\n                // Btn z-index\n                if (options.btnZ) {\n                    modalBtn.style.zIndex = options.btnZ;\n                }\n\n                // Btn position\n                if (options.btnPos) {\n                    modalBtn.style.position = options.btnPos;\n                }\n                \n                // TODO: Btn color\n                if (options.btnColor) {\n                    modalBtn.style.backgroundColor = options.btnColor;\n                }\n\n                // Append to selector\n                if (options.btnAppendTo) {\n                    elBtnParent = document.querySelector(options.btnAppendTo);\n                    elBtnParent.appendChild(modalBtn);\n                }\n\n                // Prepend to selector\n                if (options.btnPrependTo) {\n                    elBtnParent = document.querySelector(options.btnPrependTo);\n                    elBtnParent.prepend(modalBtn);\n                }\n                \n                // Script selector\n                if (options.scriptSelector) {\n                    modalBtn.setAttribute('data-view-markup-script-selector', options.scriptSelector);\n                }\n                \n                // Backdrop rgba\n                if (options.backdropRgb) {\n                    modalBtn.setAttribute('data-view-markup-backdrop-rgb', options.backdropRgb);\n                }\n                \n                // In page rendering\n                if (options.renderInPage) {\n                    modalBtn.setAttribute('data-view-markup-in-page', 'true');\n                }\n                \n                // Modal navigation\n                if (options.modalNav === 'true') {\n                    modalBtn.setAttribute('data-view-markup-modal-nav', 'true');\n                }\n                \n                // Bottom margin for in page view\n                if (options.marginBottom) {\n                    item.closest('.view-markup').style.marginBottom = options.marginBottom;\n                }\n                \n                // Top margin for in page view\n                if (options.marginTop) {\n                    item.closest('.view-markup').style.marginTop = options.marginTop;\n                }\n            }   \n        });\n\n\n        // Check for preserve-attribute option\n        function leaveAttr(el) {\n            let optionPreserveAttr = null;\n            \n            if (el.getAttribute('data-view-markup').split(';')) {\n                let semiColonSplit = el.getAttribute('data-view-markup').split(';');\n                \n                if (semiColonSplit[0].split('preserve-attribute:')[1] !== undefined) {\n                    optionPreserveAttr = semiColonSplit[0].split('preserve-attribute:')[1].trim();\n                }\n                        \n                if (optionPreserveAttr === 'true') {\n                    return true;\n                } else {\n                    return false;\n                }    \n            }\n        }\n        \n        function suppressClass(el) {\n            let optionSuppressClass = null;\n            \n            if (el.getAttribute('data-view-markup').split(';')) {\n                let semiColonSplit = el.getAttribute('data-view-markup').split(';');\n                \n                if (semiColonSplit[0].split('suppress-class:')[1] !== undefined) {\n                    optionSuppressClass = semiColonSplit[0].split('suppress-class:')[1].trim();\n                    return optionSuppressClass;\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        // Spit out option value\n        function parseOption(splitOn, optionString) {\n            return splitOn.split(optionString + ':')[1].trim();\n        }\n\n\n\n\n\n        // -----------------------------------------------------------------------------\n        // Custom styles added via js\n        // -----------------------------------------------------------------------------\n\n        // Create style tag to dump styles into for the markup modal\n        let textStyle = document.createElement('style');\n        textStyle.setAttribute('id', 'viewMarkupStyle');\n\n        // Import compressed styles as a string\n        let textStyleString = `//import view-markup.css`;\n\n        // Apply in page styles to style tag\n        textStyle.textContent = textStyleString;\n\n        // Add in page styles to head\n        document.head.appendChild(textStyle);\n\n\n\n\n\n        // -----------------------------------------------------------------------------\n        // Load external libraries\n        // -----------------------------------------------------------------------------\n\n        // TODO: import these through npm packages\n\n        // Highlight css and js CDN. Project repo: https://github.com/highlightjs/highlight.js/\n        let highlightVersionNumb = {\n            css: '10.7.2',\n            js: '11.3.1'\n        }\n        let themeCssDarkUrl = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/' + highlightVersionNumb.css + '/styles/atom-one-dark.min.css';\n        let themeCssLightUrl = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/' + highlightVersionNumb.css + '/styles/github.min.css';\n\n        let highlightCssUrl = (localStorage.getItem('checkedThemeColor') === null || localStorage.getItem('checkedThemeColor') === 'dark') ? themeCssDarkUrl : themeCssLightUrl;\n        let highlightScriptUrl = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/' + highlightVersionNumb.js + '/highlight.min.js';\n\n        // Beautify HTML CDN. Project repo: https://github.com/beautifier/beautifier.io\n        let beautifyVersionNumb = '1.14.0';\n        let beautifyScriptUrl = 'https://cdnjs.cloudflare.com/ajax/libs/js-beautify/' + beautifyVersionNumb + '/beautify-html.min.js';\n\n        // HTML2Canvas CDN\n        let html2CanvasVersionNumb = '1.4.1';\n        let html2CanvasScriptUrl = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/' + html2CanvasVersionNumb + '/html2canvas.min.js';\n\n        // Load highlight js/css external assets\n        loadExternalCss(highlightCssUrl);\n\n        // Initalize everything after getting beautify-html script\n        loadExternalJs(beautifyScriptUrl, loadFinalJS);\n        \n        // loadExternalJs(html2CanvasScriptUrl);\n\n        function loadFinalJS() {\n            loadExternalJs(highlightScriptUrl, viewMarkupInitialize);\n        }\n\n        function loadExternalJs(scriptSrc, callback) {\n            let head = document.getElementsByTagName('head')[0];\n            let script = document.createElement('script');\n            \n            script.src = scriptSrc;\n            \n            head.appendChild(script);\n            script.onload = callback;\n        }\n\n        // Run after getting beautify-html/highlight.io external assets\n        function loadExternalCss(url, callback) {\n            let head = document.getElementsByTagName('head')[0];\n            let link = document.createElement('link');\n                \n            link.id = 'highlightJsCss';\n            link.rel = 'stylesheet';\n            link.href = url;\n            \n            link.onreadystatechange = callback;\n            link.onload = callback;\n            head.appendChild(link);\n        }\n\n\n\n\n\n        // -----------------------------------------------------------------------------\n        // Render modal\n        // -----------------------------------------------------------------------------\n            \n        // Setup modal outer div and attributes\n        modal.classList.add('view-markup-modal');\n        modal.setAttribute('id', 'viewMarkupModal');\n        modal.setAttribute('aria-labelledby', 'viewMarkupModalTitle');\n        modal.setAttribute('aria-modal', true);\n        modal.setAttribute('role', 'dialog');\n        modal.setAttribute('tabindex', '-1');\n\n        // Create modal dialog div\n        let modalDialog = document.createElement('div');\n\n        // Insert modal dialog element into outer modal element\n        modalDialog.classList.add('view-markup-modal__dialog');\n        modal.appendChild(modalDialog);\n\n        // Add the rest of the html string into modal dialog\n        modalDialog.innerHTML = markupContentHtmlString;\n        document.body.appendChild(modal);\n\n        // Set in page element\n        let wrapperEl = document.querySelectorAll('.view-markup');\n        wrapperEl.forEach(function (item) {\n            if (item.querySelector('[data-view-markup-in-page]')) {\n                let inPageBlock = document.createElement('div');\n                inPageBlock.classList.add('view-markup__in-page-view');\n                item.appendChild(inPageBlock);\n                inPageBlock.innerHTML = markupContentHtmlString;\n            }\n        });\n\n        // Assign in page unique ids and adjust aria-lablledby to match\n        let inPageContent = document.querySelectorAll('.view-markup__in-page-view .view-markup__content');\n        let inPageHeader = document.querySelectorAll('.view-markup__in-page-view .view-markup__header');\n        let modalSetSize = document.querySelectorAll('.view-markup__size-set');\n\n        inPageContent.forEach(function (item, index) {\n            inPageHeader[index].remove();\n            modalSetSize[index].remove();\n            \n            let allID = item.querySelectorAll('[id]');\n            let allFor = item.querySelectorAll('[for]');\n            let allAriaLabelledBy = item.querySelectorAll('[aria-labelledby]');\n\n            // Unique id\n            for (let x = 0; x < allID.length; x++) {\n                allID[x].id = allID[x].id + '-' + index;\n            }\n            \n            // Unique for\n            for (let y = 0; y < allFor.length; y++) {\n                let currentFor = allFor[y].getAttribute('for');\n                allFor[y].setAttribute('for', currentFor + '-' + index);\n            }\n\n            // Unique aria-labelledby\n            for (let z = 0; z < allAriaLabelledBy.length; z++) {\n                let currentAriaLabelledBy = allAriaLabelledBy[z].getAttribute('aria-labelledby');\n                allAriaLabelledBy[z].setAttribute('aria-labelledby', currentAriaLabelledBy + '-' + index);\n            }\n        });\n\n        // When external assets are loaded run this\n        function readyAdjustments() {\n            wrapperEl.forEach(function (item, index) {\n                \n                // Tidy js\n                if (item.querySelector('[data-view-markup-in-page]') && item.querySelector('[data-view-markup-script-selector]')) {\n                    let inPageCodeJsBlock = item.querySelector('.view-markup__code--js');\n                    let scriptSelector = item.querySelector('[data-view-markup-script-selector]').getAttribute('data-view-markup-script-selector');\n                    let scriptElement = document.querySelector(scriptSelector);\n                    let jsToTidy = scriptElement.outerHTML.toString().replace(/ id=\".*\"/g, '');\n                    \n                    let tidyJS = html_beautify(jsToTidy, {\n                        indent_size: getCachedSpaceTab(),\n                        space_in_empty_paren: true\n                    });\n                    \n                    inPageCodeJsBlock.textContent = tidyJS;\n                    hljs.highlightElement(inPageCodeJsBlock);\n                    \n                    if (inPageCodeJsBlock.textContent !== '') {\n                        inPageCodeJsBlock.closest('.view-markup__content').classList.add('view-markup-modal--has-js');\n                    }\n                }\n                \n                // Tidy html\n                if (item.querySelector('[data-view-markup-in-page]')) {\n                    let inPageCodeHtmlBlock = item.querySelector('.view-markup__code--html');\n                    let tidyHTML = html_beautify(elHtmlStripped[index], {\n                        indent_size: getCachedSpaceTab(),\n                        space_in_empty_paren: true\n                    });\n                    \n                    inPageCodeHtmlBlock.textContent = tidyHTML;\n                    hljs.highlightElement(inPageCodeHtmlBlock);\n                    \n                    // Remove uneeded modal button\n                    item.querySelector('[data-view-markup-in-page]').remove();\n                }\n            });\n            \n            // Ready to initialize modal navigation\n            modalNavigation();\n            \n            // Add ready class on body\n            document.documentElement.classList.add('js-view-markup-ready');\n        }\n\n\n\n\n        // -----------------------------------------------------------------------------\n        // Cache rendered elements\n        // -----------------------------------------------------------------------------\n\n        let modalContent = document.querySelectorAll('.view-markup__content');\n        let modalCloseBtn = document.querySelectorAll('.view-markup__close-btn');\n        let copyBtn = document.querySelectorAll('.view-markup__copy-btn');\n        let settingsBtn = document.querySelectorAll('.view-markup__settings-btn');\n        let settingsDropdown = document.querySelectorAll('.view-markup__settings-dropdown');\n        let textArea = document.querySelectorAll('.view-markup__hidden-textarea');\n        let preEl = document.querySelectorAll('.view-markup__pre');\n        let htmlCodeEl = document.querySelectorAll('.view-markup__code--html');\n        let jsCodeEl = document.querySelectorAll('.view-markup__code--js');\n        let radio2Spaces = document.querySelectorAll('.view-markup__indent-2');\n        let radio4Spaces = document.querySelectorAll('.view-markup__indent-4');\n        let themeDark = document.querySelectorAll('.view-markup__theme-dark');\n        let themeLight = document.querySelectorAll('.view-markup__theme-light');\n        let fontSize = document.querySelectorAll('.view-markup__font-size');\n        let htmlTab = document.querySelectorAll('.view-markup__tabs-button--html');\n        let jsTab = document.querySelectorAll('.view-markup__tabs-button--js');\n        let inPageCodeBlock = document.querySelectorAll('.view-markup-in-page');\n\n        // Modal specific elements\n        let modalCodeHtmlEL = document.querySelector('.view-markup-modal .view-markup__code--html');\n        let modalContentEl = document.querySelector('.view-markup-modal .view-markup__content');\n        let modalTitleEl = document.querySelector('.view-markup-modal .view-markup__title');\n        let modalSizeMedium = document.querySelectorAll('.view-markup__size-medium');\n        let modalSizeLarge = document.querySelectorAll('.view-markup__size-large');\n        let modalCodeJsEL = document.querySelectorAll('.view-markup-modal .view-markup__code--js');\n\n\n\n\n\n\n\n\n        // -----------------------------------------------------------------------------\n        // Setup cached settings\n        // -----------------------------------------------------------------------------\n\n        // Select cached tabspaces radio\n        if (localStorage.getItem('checkedSpaceTab') === null || localStorage.getItem('checkedSpaceTab') === '4' ) {\n            radio4Spaces.forEach(function (item) {\n                item.checked = true;\n            });\n        } else {\n            radio2Spaces.forEach(function (item) {\n                item.checked = true;\n            });\n        }\n\n\n        // Select cached theme radio\n        if (localStorage.getItem('checkedThemeColor') === null || localStorage.getItem('checkedThemeColor') === 'dark') {\n            themeDark.forEach(function (item) {\n                item.checked = true;\n            });\n        } else {\n            themeLight.forEach(function (item) {\n                item.checked = true;\n            });\n            document.documentElement.classList.add('js-view-markup-theme-light');\n        }\n\n\n        // Select cached modal size radio\n        if (localStorage.getItem('checkedModalSize') === null || localStorage.getItem('checkedModalSize') === 'medium' ) {\n            modalSizeMedium.forEach(function (item) {\n                item.checked = true;\n            });\n        } else {\n            modalSizeLarge.forEach(function (item) {\n                item.checked = true;\n            });\n            document.body.classList.add('js-view-markup-size-large');\n        } \n\n\n        // Get cached font-size\n        if (localStorage.getItem('fontSizevalue') === null ) {\n            fontSize.forEach(function (item) {\n                item.value = '13';\n            });\n        } else {\n            let currentValue = localStorage.getItem('fontSizevalue');\n            \n            fontSize.forEach(function (item) {\n                item.value = localStorage.getItem('fontSizevalue');\n            });\n\n            preEl.forEach(function (item, index) {\n                item.style.fontSize = currentValue + 'px';\n            });\n        }\n\n        // Font code font size\n        fontSize.forEach(function (item, index) {\n            item.addEventListener('change', function () {\n                let currentValue = item.value;\n                \n                localStorage.setItem('fontSizevalue', currentValue);\n\n                fontSize.forEach(function (item, index) {\n                    item.value = currentValue\n                });\n\n                preEl.forEach(function (item, index) {\n                    item.style.fontSize = currentValue + 'px';\n                });\n            });\n        });\n\n\n\n\n        // -----------------------------------------------------------------------------\n        // Modal and code controls\n        // -----------------------------------------------------------------------------\n\n        // Copy button\n        copyBtn.forEach(function (item, index) {\n            item.addEventListener('click', function () {\n                let currentShowingCode;\n                let closestElement = item.closest('.view-markup__content');\n                let currentCode = closestElement.querySelectorAll('.view-markup__code');\n                        \n                for (let i = 0; i < currentCode.length; i++) {\n                    if (currentCode[i].offsetWidth > 0 && currentCode[i].offsetHeight > 0) {\n                        currentShowingCode = currentCode[i];\n                    }\n                }\n                        \n                applyTidyCodeToTextArea(currentShowingCode.textContent, getCachedSpaceTab(), index);\n                \n                applyCopyBtnState('disabled');\n\n                navigator.clipboard.writeText(textArea[index].value);\n            });\n        });\n\n        // Tabspaces (2) radio change event listeners\n        radio2Spaces.forEach(function (item, index) {\n            item.addEventListener('change', function () {\n                if (this.checked === true) {\n                    \n                    // Remember tab checked radio\n                    localStorage.setItem('checkedSpaceTab', 2);\n                    \n                    radio4Spaces.forEach(function (item, index) {\n                        item.checked = false;\n                    });\n                    \n                    radio2Spaces.forEach(function (item, index) {\n                        item.checked = true;\n                    });\n                    \n                    // Set to 2 tabs\n                    htmlCodeEl.forEach(function (item) {\n                        applyCleanHtml(item.textContent, 4, null, item);\n                    });\n                    \n                    // Apply clean js\n                    applyCleanJs(2, null, true, jsCodeEl);\n                                            \n                    // Set copy button state\n                    applyCopyBtnState('enabled');\n                    \n                    this.focus();\n                }\n            });\n        });\n\n        // Tabspaces (4) radio change event listeners\n        radio4Spaces.forEach(function (item, index) {\n            item.addEventListener('change', function () {\n                if (this.checked === true) {\n                    \n                    // Remember tab checked radio\n                    localStorage.setItem('checkedSpaceTab', 4);\n                    \n                    radio2Spaces.forEach(function (item, index) {\n                        item.checked = false;\n                    });\n                    \n                    radio4Spaces.forEach(function (item, index) {\n                        item.checked = true;\n                    });\n                    \n                    // Set to 4 tabs\n                    htmlCodeEl.forEach(function (item) {\n                        applyCleanHtml(item.textContent, 4, null, item);\n                    });\n                    \n                    // Apply clean js\n                    applyCleanJs(4, null, true, jsCodeEl);\n                    \n                    // Set copy button state\n                    applyCopyBtnState('enabled');\n                    \n                    this.focus();\n                }\n            });\n        });\n\n\n        // Dark theme radio change event listeners\n        themeDark.forEach(function (item) {\n            item.addEventListener('change', function () {\n                if (this.checked === true) {\n                    \n                    themeLight.forEach(function (item, index) {\n                        item.checked = false;\n                    });\n                    \n                    themeDark.forEach(function (item, index) {\n                        item.checked = true;\n                    });\n                    \n                    // Remember tab checked radio\n                    localStorage.setItem('checkedThemeColor', 'dark');\n                    document.documentElement.classList.remove('js-view-markup-theme-light');\n                    document.getElementById('highlightJsCss').href = themeCssDarkUrl;\n                }\n            });\n        });\n\n        // Light theme radio change event listeners\n        themeLight.forEach(function (item) {\n            item.addEventListener('change', function () {\n                if (this.checked === true) {\n                    \n                    themeDark.forEach(function (item, index) {\n                        item.checked = false;\n                    });\n                    \n                    themeLight.forEach(function (item, index) {\n                        item.checked = true;\n                    });\n                    \n                    // Remember tab checked radio\n                    localStorage.setItem('checkedThemeColor', 'light');\n                    document.documentElement.classList.add('js-view-markup-theme-light');\n                    document.getElementById('highlightJsCss').href = themeCssLightUrl;\n                }\n            });\n        });\n\n        // Medium modal size radio change event listeners\n        modalSizeMedium.forEach(function (item) {\n            item.addEventListener('change', function () {\n                if (this.checked === true) {\n                    \n                    modalSizeLarge.forEach(function (item, index) {\n                        item.checked = false;\n                    });\n                    \n                    modalSizeMedium.forEach(function (item, index) {\n                        item.checked = true;\n                    });\n                    \n                    // Remember tab checked radio\n                    localStorage.setItem('checkedModalSize', 'medium');\n                    document.body.classList.remove('js-view-markup-size-large');\n                }\n            });\n        });\n\n        // Large modal size radio change event listeners\n        modalSizeLarge.forEach(function (item) {\n            item.addEventListener('change', function () {\n                if (this.checked === true) {\n                    \n                    modalSizeMedium.forEach(function (item, index) {\n                        item.checked = false;\n                    });\n                    \n                    modalSizeLarge.forEach(function (item, index) {\n                        item.checked = true;\n                    });\n                    \n                    // Remember tab checked radio\n                    localStorage.setItem('checkedModalSize', 'large');\n                    document.body.classList.add('js-view-markup-size-large');\n                }\n            });\n        });\n\n\n\n\n\n        // -----------------------------------------------------------------------------\n        // HTML/JS tab toggling\n        // -----------------------------------------------------------------------------\n\n        htmlTab.forEach(function (item, index) {\n            item.addEventListener('click', function () {\n                applyCopyBtnState('enabled');\n                this.closest('.view-markup__content').classList.remove('view-markup--js-tab-showing');\n            });\n        });\n\n        jsTab.forEach(function (item, index) {\n            item.addEventListener('click', function () {\n                applyCopyBtnState('enabled');\n                this.closest('.view-markup__content').classList.add('view-markup--js-tab-showing');\n            });\n        });\n\n\n\n\n\n\n\n        // -----------------------------------------------------------------------------\n        // Exiting the modal\n        // -----------------------------------------------------------------------------\n\n        // Hide modal by clicking outside of it\n        modal.addEventListener('mousedown', function (event) {\n            let isClickInside = false;\n            \n            modalContent.forEach(function (item) {\n                if ( item.contains(event.target) ) {\n                    isClickInside = true;\n                }\n            });\n            \n            if (!isClickInside && this.classList.contains('view-markup-modal--showing')) {\n                modalHide();\n            }\n        });\n\n        // Hide modal with close and cancel button click\n        modalCloseBtn.forEach(function (item) {\n            item.addEventListener('click', function () {\n                modalHide();\n            });\n        });\n\n        // Hide modal with esc key\n        modal.addEventListener('keydown', function (e) {\n            let key = e.key;\n\n            if (key === 'Escape' && document.documentElement.classList.contains('js-view-markup-modal-showing')) {\n                modalHide();\n            }\n        });\n\n\n\n\n\n        // -----------------------------------------------------------------------------\n        // Settings dropdown functionality\n        // -----------------------------------------------------------------------------\n\n        let optionDropdownClass = 'view-markup__settings-dropdown--showing';\n\n        // Settings dropdown\n        settingsBtn.forEach(function (item, index) {\n            item.addEventListener('click', function () {\n                let ariaExpandedAttr = this.getAttribute('aria-expanded');\n\n                this.setAttribute('aria-expanded', (ariaExpandedAttr === 'true') ? 'false' : 'true');\n                settingsDropdown[index].classList.toggle(optionDropdownClass);\n            });\n        });\n\n        // Hide settings dropdown by clicking outside of it\n        document.addEventListener('mousedown', function (event) {\n            settingsDropdown.forEach(function (item, index) {\n                let isClickInside = item.contains(event.target);\n\n                if (\n                    !event.target.classList.contains('view-markup__settings-btn') &&\n                    item.classList.contains(optionDropdownClass) &&\n                    !isClickInside\n                ) {\n                    settingsBtn[index].setAttribute('aria-expanded', false);\n                    item.classList.remove(optionDropdownClass);\n                }\n            });\n        });\n\n        // Focus out of dropdown\n        // settingsDropdown.addEventListener('focusout', function (event) {\n        //     settingsBtn.setAttribute('aria-expanded', false);\n        //     settingsDropdown.classList.remove(optionDropdownClass);\n        // });\n\n\n\n\n\n        // -----------------------------------------------------------------------------\n        // Functions\n        // -----------------------------------------------------------------------------\n\n        // Function properly assigns untouched DOM html modal\n        function viewMarkupInitialize() {\n            elHtmlStripped.forEach(function (item, index) {\n                \n                // Assign modal button to correct html to view\n                let modalParent = viewMarkupEl[index].closest('.view-markup') || viewMarkupEl[index];\n                let modalBtnEL = modalParent.querySelector('.view-markup__modal-btn');\n\n                // Crack open the modal with the correct html in view\n                modalMapping(item, 2, modalBtnEL, null);\n            });\n            \n            readyAdjustments();\n        }\n\n        // Cleanup and highlight markup\n        function applyCleanHtml(html, spaces, btnEl, codeEl) {\n            let tidyHTML = html_beautify(html, { indent_size: getCachedSpaceTab(), space_in_empty_paren: true });\n                \n            codeEl.textContent = tidyHTML;\n            \n            hljs.highlightElement(codeEl);\n        }\n\n        // Cleanup and highlight associated js\n        function applyCleanJs(spaces, btnEl, setTabSpaces, jsCodeEl) {    \n            for (let i = 0; i < jsCodeEl.length; i++) {\n                if (jsCodeEl[i] !== undefined) {\n                    let jsToTidy;\n                            \n                    if (setTabSpaces) {\n                        jsToTidy = jsCodeEl[i].textContent;\n                    } else if (btnEl !== null && btnEl.hasAttribute('data-view-markup-script-selector')) {\n                        let scriptElement = document.querySelector(btnEl.getAttribute('data-view-markup-script-selector'));\n                        jsToTidy = scriptElement.outerHTML.toString().replace(/ id=\".*\"/g, '');\n                    }\n                            \n                    jsCodeEl[i].textContent = '';\n                    \n                    let tidyJs = html_beautify(jsToTidy, { indent_size: getCachedSpaceTab(), space_in_empty_paren: true });\n                    \n                    jsCodeEl[i].textContent = tidyJs;\n                    \n                    hljs.highlightElement(jsCodeEl[i]);\n                }\n            }\n        }\n\n        // Return cached space/tab amount\n        function getCachedSpaceTab() {\n            let checkedSpacesRadio;\n            if (localStorage.getItem('checkedSpaceTab') === null) {\n                checkedSpacesRadio = (radio2Spaces[0].checked === true) ? 2 : 4;\n            } else {\n                checkedSpacesRadio = localStorage.getItem('checkedSpaceTab');\n            }\n            return checkedSpacesRadio;\n        }\n\n        // Populate hidden textarea with tidy html/js for copy button\n        function applyTidyCodeToTextArea(code, spaceTabRadio, index) {\n            let tidyCode = html_beautify(code, { indent_size: spaceTabRadio, space_in_empty_paren: true });\n            textArea[index].textContent = tidyCode;\n            return;\n        }\n\n        // Function that gets html, beautifies it, and displays it in a modal\n        let currentViewMarkupIndex;\n        function modalMapping(html, spaces, btnEl) {    \n            btnEl.addEventListener('click', function () {        \n                \n                // Current modal button index (used for modal navigation)\n                currentViewMarkupIndex = this.getAttribute('data-view-markup-nav-index');\n                \n                // screenShotDomElement(viewMarkupEl[currentViewMarkupIndex]);\n\n                // Clean html\n                applyCleanHtml(html, spaces, this, modalCodeHtmlEL);\n                \n                // Clean js\n                applyCleanJs(spaces, this, null, modalCodeJsEL);\n\n                modalContentEl.classList.remove('view-markup--js-tab-showing');\n                \n                jsCodeEl.forEach(function (item) {\n                    if (item.textContent !== '') {\n                        modalContentEl.classList.add('view-markup-modal--has-js');\n                    } else {\n                        modalContentEl.classList.remove('view-markup-modal--has-js');\n                    }\n                });\n                \n                modalShow();\n                \n                applyCopyBtnState('enabled');\n\n                // Add option title to modal title if there is one\n                if (btnEl.hasAttribute('data-view-markup-title')) {\n                    let cleanTitle = btnEl.getAttribute('data-view-markup-title').replace(/^'(.*)'$/, '$1');\n                    modalTitleEl.textContent = cleanTitle;\n                } else {\n                    modalTitleEl.textContent = 'Viewing markup';\n                }\n                \n                // Add option backdrop rgb to modal back\n                if (btnEl.hasAttribute('data-view-markup-backdrop-rgb')) {\n                    modal.style.backgroundColor = 'rgba(' + options.backdropRgb + ', .7)';\n                } else {\n                    modal.style.backgroundColor = '';\n                }\n            });\n        }\n\n        // Apply copy button state\n        function applyCopyBtnState(state) {\n            let clickedButton = document.querySelectorAll('.view-markup__copy-btn:focus');\n            if (state === 'disabled') {\n                clickedButton.forEach(function (item) {\n                    item.textContent = 'Copied';\n                    item.setAttribute('disabled', 'disabled');\n                });\n            } else if (state === 'enabled') {\n                copyBtn.forEach(function (item) {\n                    item.textContent = 'Copy';\n                    item.removeAttribute('disabled');\n                });\n            }\n        }\n\n        // Wrap in tag\n        function wrapElement(el, wrapper) {\n            el.parentNode.insertBefore(wrapper, el);\n            wrapper.appendChild(el);\n        }\n\n        // Insert after\n        function insertAfter(newNode, existingNode) {\n            existingNode.parentNode.insertBefore(newNode, existingNode.nextSibling);\n        }\n\n        // Show modal\n        let focusedElementBeforeModal;\n        function modalShow() {\n            document.documentElement.classList.add('js-view-markup-modal-showing');\n            modal.classList.add('view-markup-modal--showing');\n            \n            // Save current focus\n            focusedElementBeforeModal = document.activeElement;\n\n            // Listen for and trap the keyboard\n            modal.addEventListener('keydown', trapTabKey);\n            \n            // Find all focusable children\n            let focusableElementsString =\n                'a[href],' +\n                'area[href],' +\n                'input,' +\n                'select:not([disabled]),' +\n                'textarea:not([tabindex=\"-1\"]),' +\n                'button:not([disabled]),' +\n                'iframe,' +\n                'object,' +\n                'embed,' +\n                '[tabindex=\"0\"],' +\n                '[contenteditable]';\n                \n            let focusableElements = modal.querySelectorAll(focusableElementsString);\n            \n            // Convert NodeList to Array\n            focusableElements = Array.prototype.slice.call(focusableElements);\n\n            let firstTabStop = focusableElements[0];\n            let lastTabStop = focusableElements[focusableElements.length - 1];\n            \n            // Set initial focus on the modal\n            modal.focus();\n            \n            function trapTabKey(e) {\n                \n                // Check for TAB key press\n                if (e.keyCode === 9) {\n\n                    // SHIFT + TAB\n                    if (e.shiftKey) {\n                        if (document.activeElement === firstTabStop) {\n                            e.preventDefault();\n                            lastTabStop.focus();\n                        }\n\n                    // TAB\n                    } else {\n                        if (document.activeElement === lastTabStop) {\n                            e.preventDefault();\n                            firstTabStop.focus();\n                        }\n                    }\n                }\n            }\n        }\n\n        // Hide modal\n        function modalHide() {\n            document.documentElement.classList.remove('js-view-markup-modal-showing');\n            modal.classList.remove('view-markup-modal--showing');\n            applyCopyBtnState('enabled');\n            focusedElementBeforeModal.focus();\n        }\n\n        // Go to previous/next view markup element\n        function modalNavigate(el, direction) {\n            let mapToModalBtnIndex;\n            \n            if (direction === 'prev') {\n                mapToModalBtnIndex = (parseInt(currentViewMarkupIndex) === 0) ? parseInt(elAmount) - 1 : parseInt(currentViewMarkupIndex) - 1;\n            } else if (direction === 'next') {\n                mapToModalBtnIndex = (parseInt(currentViewMarkupIndex) === parseInt(elAmount) - 1) ? 0 : parseInt(currentViewMarkupIndex) + 1;\n            }\n                \n            let mapToModalBtnSelector = '[data-view-markup-nav-index=\"' + mapToModalBtnIndex + '\"]';\n            let mapToModalBtn = document.querySelector(mapToModalBtnSelector.toString());\n            \n            document.documentElement.classList.add('js-view-markup-modal-showing--navigating');\n            \n            mapToModalBtn.click();\n            mapToModalBtn.focus();\n            \n            setTimeout(function () {\n                document.documentElement.classList.remove('js-view-markup-modal-showing--navigating');\n            }, 300);\n        }\n\n        // Modal navigation arrows\n        function modalNavigation() {    \n            \n            // Add index to modal buttons for navigation\n            let modalNavEl = document.querySelector('.view-markup__nav');\n            let modalBtn = document.querySelectorAll('.view-markup__modal-btn');\n            \n            elAmount = modalBtn.length;\n            \n            modalBtn.forEach(function (item, index) {\n                item.setAttribute('data-view-markup-nav-index', index);\n            });\n            \n            if (elAmount > 1) {\n\n                // Modal previous button\n                let modalPrevBtn = modal.querySelector('.view-markup__prev-btn');\n\n                // Modal next button\n                let modalNextBtn = modal.querySelector('.view-markup__next-btn');\n                \n                // Modal previous button click\n                modalPrevBtn.addEventListener('click', function () {\n                    modalNavigate(this, 'prev');\n                });\n\n                // Modal next button click\n                modalNextBtn.addEventListener('click', function () {\n                    modalNavigate(this, 'next');\n                });  \n            } else {\n\n                // Remove modal nav if only 1 item\n                modalNavEl.remove();\n            }\n            \n            if (modalNav === null) {\n            \n                // Remove modal nav if no setting is found\n                modalNavEl.remove();\n            }\n        }\n\n\n\n\n        \n        /* -----------------------------------------------------------------------------\n            EXPIREMENTAL WIP: prototype floating the buttons over the page instead of\n            wrapping each element in a div and then positioning it inside that div. Not\n            a fan of how much it currently modifies the DOM to get the modal button next\n            to the associated element correctly\n\n            TODOS:\n            ✓ Allow for dynamic button positioning\n            • Add \"Skip to view markup modal navigation\" skip link\n            • Add visual focus indicator to modal button when focus in the background\n              when using modal navigation.\n            ✓ Set smooth scrolling on the html,body when modal is active\n            • Enhance preserve attribute functionality a bit. (allow for top and inner)\n        ----------------------------------------------------------------------------- */\n\n        // Render image of view-markup element\n        function screenShotDomElement(el) {\n            html2canvas(el).then(function(canvas) {\n                document.body.appendChild(canvas);\n            });\n        }\n\n        // Unwrap function\n        function unwrap(wrapper) {\n            let docFrag = document.createDocumentFragment();\n            \n            while (wrapper.firstChild) {\n                let child = wrapper.removeChild(wrapper.firstChild);\n                docFrag.appendChild(child);\n            }\n\n            wrapper.parentNode.replaceChild(docFrag, wrapper);\n        }\n\n        // Debounce function (throttle window resize)\n        function debounce(func) {\n            let timer;\n\n            return (event) => {\n                if (timer) {\n                    clearTimeout(timer);\n                }\n                timer = setTimeout(func, 1000, event);\n            };\n        }\n\n        // Get query params if any\n        let scriptLinkage = document.getElementById('view-markup-js');\n        let modalNav = null;\n        let dynamicPos = null;\n        let dynamicPosZIndex = null;\n\n        if (scriptLinkage) {\n            let urlParam = new URLSearchParams(scriptLinkage.getAttribute('src').split('?')[1]);\n            modalNav = urlParam.get('modal-nav');\n            dynamicPos = urlParam.get('dynamic-pos');\n            dynamicPosZIndex = urlParam.get('z-index');\n\n            // If dynamic position query param is set, do some stuff\n            if (dynamicPos !== null) {\n                window.addEventListener('load', () => {\n                \n                    // Create new div that will contain all modal buttons\n                    let floatingButtonHolder = document.createElement('div');\n                    floatingButtonHolder.classList.add('view-markup-dynamic-nav');\n                    \n                    if (dynamicPosZIndex !== null) {\n                        floatingButtonHolder.style.zIndex = dynamicPosZIndex.toString();\n                    }\n                    \n                    document.body.appendChild(floatingButtonHolder);\n            \n                    // Cache elements with modals\n                    let withModalEl = document.querySelectorAll('[data-view-markup]:not([data-view-markup-render-in-page])');\n                    \n                    // Re-cache remaining buttons\n                    let floatingModalBtn = document.querySelectorAll('.view-markup__modal-btn');\n                    \n                    // Dynamically position modal button next to associated element\n                    function positionModalBtns(load) {\n                        \n                        // Add inline css to position button at the top left of the element\n                        withModalEl.forEach( (item, i) => {\n                            let btnElement = floatingModalBtn[i];\n            \n                            btnElement.style.top = (item.getBoundingClientRect().top + window.scrollY) + 'px';\n                            btnElement.style.left = item.getBoundingClientRect().left + 'px';\n            \n                            if (load === 'load') {\n                                floatingButtonHolder.appendChild(btnElement);\n                            }\n                        });\n                    }\n                    \n                    // Remove un-needed highlight divs\n                    let highlightElement = document.querySelectorAll('.view-markup__highlight');\n                    highlightElement.forEach( (item) => {\n                        item.remove();\n                    });\n            \n                    // Unwrap view-markup div\n                    wrapperEl.forEach( (item) => {\n                        unwrap(item);\n                    });\n                    \n                    // Position buttons on load\n                    positionModalBtns('load');\n                    \n                    // Position buttons after resize\n                    window.addEventListener('resize', debounce( () => {\n                        positionModalBtns();\n                    }));\n                });\n            }\n        }\n    }\n})();"]}